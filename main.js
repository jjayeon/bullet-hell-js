!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){var r,o;
/**
 * mainloop.js 1.0.3-20170529
 *
 * @author Isaac Sukin (http://www.isaacsukin.com/)
 * @license MIT
 */!function(i){function u(t){if(c=x(u),!(t<f+v)){for(a+=t-f,f=t,S(t,a),t>y+h&&(l=p*d*1e3/(t-y)+(1-p)*l,y=t,d=0),d++,b=0;a>=s;)if(j(s),a-=s,++b>=240){_=!0;break}P(a/s),E(l,_),_=!1}}var c,s=1e3/60,a=0,f=0,l=60,p=.9,h=1e3,y=0,d=0,b=0,v=0,m=!1,g=!1,_=!1,w="object"==typeof window?window:i,x=w.requestAnimationFrame||function(){var t,e,n=Date.now();return function(r){return t=Date.now(),e=Math.max(0,s-(t-n)),n=t+e,setTimeout((function(){r(t+e)}),e)}}(),k=w.cancelAnimationFrame||clearTimeout,O=function(){},S=O,j=O,P=O,E=O;i.MainLoop={getSimulationTimestep:function(){return s},setSimulationTimestep:function(t){return s=t,this},getFPS:function(){return l},getMaxAllowedFPS:function(){return 1e3/v},setMaxAllowedFPS:function(t){return void 0===t&&(t=1/0),0===t?this.stop():v=1e3/t,this},resetFrameDelta:function(){var t=a;return a=0,t},setBegin:function(t){return S=t||S,this},setUpdate:function(t){return j=t||j,this},setDraw:function(t){return P=t||P,this},setEnd:function(t){return E=t||E,this},start:function(){return g||(g=!0,c=x((function(t){P(1),m=!0,f=t,y=t,d=0,c=x(u)}))),this},stop:function(){return m=!1,g=!1,k(c),this},isRunning:function(){return m}},r=i.MainLoop,void 0===(o="function"==typeof r?r.call(e,n,e,t):r)||(t.exports=o)}(this)},function(t,e){const n=["mouseleft","mousemiddle","mouseright"],r=["Alt","Control","Meta","Shift"];t.exports={initBinds:function(){var t={None:{}};for(const e of r)t[e]={};return t},prepareDocument:function(t){document.addEventListener("keydown",e=>{t.pressed[e.key]=!0}),document.addEventListener("keyup",e=>{t.pressed[e.key]=!1}),document.addEventListener("mousedown",e=>{t.pressed[n[e.button]]=!0}),document.addEventListener("mouseup",e=>{t.pressed[n[e.button]]=!1}),document.addEventListener("mousemove",e=>{t.x=e.x,t.y=e.y})},extract:function(t){var e,n,r="None";switch(t.length){case 1:e=t[0];break;case 2:"function"==typeof t[1]?(e=t[0],n=t[1]):(r=t[0],e=t[1]);break;case 3:r=t[0],e=t[1],n=t[2]}return{mod:r,key:e,callback:n}},bindHelper:function(t,e,r,o=!1){var i;if("down"===r?i=t.binds:"up"===r&&(i=t.upbinds),i[e.mod][e.key]||(i[e.mod][e.key]=[]),e.callback){const t=function(t){(function(t,e){return("mousemove"===t.key||t.key===n[e.button]||t.key===e.key)&&("None"===t.mod||"Shift"===t.mod&&e.shiftKey||"Control"===t.mod&&e.ctrlKey||"Meta"===t.mod&&e.metaKey||"Alt"===t.mod&&e.altKey)})(e,t)&&e.callback(t)};var u;return u="mousemove"===e.key?"mousemove":n.includes(e.key)?"mouse"+r:"key"+r,i[e.mod][e.key].push(t),!o&&document.addEventListener(u,t),!0}return!1},unbindHelper:function(t,e,r,o=!1){var i,u;i="mousemove"===e.key?"mousemove":n.includes(e.key)?"mouse"+r:"key"+r,"down"===r?u=t.binds:"up"===r&&(u=t.upbinds);const c=u[e.mod][e.key];if(c)for(;c.length>0;){const t=c.pop();!o&&document.removeEventListener(i,t)}}}},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=function(){const t=n(1);var e={x:0,y:0,pressed:{},binds:t.initBinds(),upbinds:t.initBinds(),contextmenu:!0};t.prepareDocument(e);return{bind:function(...n){const r=t.extract(n);return t.bindHelper(e,r,"down")?this:this.binds[r.mod][r.key]},unbind:function(...n){const r=t.extract(n);return t.unbindHelper(e,r,"down"),this},upbind:function(...n){const r=t.extract(n);return t.bindHelper(e,r,"up")?this:this.binds[r.mod][r.key]},unupbind:function(...n){const r=t.extract(n);return t.unbindHelper(e,r,"up"),this},contextmenu:function(t){document.oncontextmenu=t?null:function(t){return t.preventDefault(),!1},e.contextmenu=t},get pressed(){return e.pressed},get x(){return e.x},get y(){return e.y},get binds(){return e.binds},get upbinds(){return e.upbinds}}}();function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e,n,r,o,i,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._canvas=e,this._width=o,this._height=i,this._img=u,this._xvals={last:n.last||0,p:n.p||0,v:n.v||0,a:n.a||0,fric:n.fric||0,max:n.max||1/0,end:e.width-o},this._yvals={last:r.last||0,p:r.p||0,v:r.v||0,a:r.a||0,fric:r.fric||0,max:r.max||1/0,end:e.height-i}}var e,n,r;return e=t,(n=[{key:"inside",value:function(t,e){return!!(this.x<=t&&t<=this.x+this.width&&this.y<=e&&e<=this.y+this.height)}},{key:"collides",value:function(t){if(u(t)!==u(this))throw new TypeError("function 'collides' called on a non-Entity object.");return!!(this.inside(t.x,t.y)||this.inside(t.x,t.y2)||this.inside(t.x2,t.y)||this.inside(t.x2,t.y2)||t.inside(this.x,this.y)||t.inside(this.x,this.y2)||t.inside(this.x2,this.y)||t.inside(this.x2,this.y2))}},{key:"update",value:function(t){function e(e){e.last=e.p;var n=e.v+e.a*t;0!==e.a?Math.abs(n)<e.max?e.v=n:e.v=e.max*Math.sign(n):e.v>0?(e.v-=e.fric,e.v<0&&(e.v=0)):e.v<0&&(e.v+=e.fric,e.v>0&&(e.v=0));var r=e.p+e.v*t;r<0?(e.p=0,e.v=0):r>e.end?(e.p=e.end,e.v=0):e.p=r}e(this._xvals),e(this._yvals)}},{key:"draw",value:function(t){var e=this._xvals.last+(this.x-this._xvals.last)*t,n=this._yvals.last+(this.y-this._yvals.last)*t;this._canvas.getContext("2d").drawImage(this._img,e,n,this.width,this.height)}},{key:"x",get:function(){return this._xvals.p}},{key:"x2",get:function(){return this._xvals.p+this.width}},{key:"y",get:function(){return this._yvals.p}},{key:"y2",get:function(){return this._yvals.p+this.height}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}])&&c(e.prototype,n),r&&c(e,r),t}();function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(i,t);var e,n,r,o=h(i);function i(t,e,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var u=e.x+e.width,c=e.y+e.height/2;return(r=o.call(this,t,{last:u,p:u,v:2},{last:c,p:c,v:2},20,20,n))._player=e,r}return e=i,(n=[{key:"update",value:function(t){l(d(i.prototype),"update",this).call(this,t),this._yvals.p=this._player.y+this._player.height/2}}])&&f(e.prototype,n),r&&f(e,r),i}(s);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x(t);if(e){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(i,t);var e,n,r,o=_(i);function i(t,e,n,r,u){var c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);return(c=o.call(this,t,{last:e,p:e,fric:.038,max:.6},{last:n,p:n,fric:.038,max:.6},25,25,r))._bulletimg=u,c._accel=.03,c._up=!1,c._down=!1,c._left=!1,c._right=!1,c._cd={cur:0,max:500},c._bullets=[],c}return e=i,(n=[{key:"fire",value:function(){this._cd.cur<=0&&(this._bullets.push(new b(this._canvas,this,this._bulletimg)),this._cd.cur=this._cd.max)}},{key:"despawnBullet",value:function(t){this._bullets.splice(t,1)}},{key:"update",value:function(t){this._xvals.a=-(this._left&&this._accel)+(this._right&&this._accel),this._yvals.a=-(this._up&&this._accel)+(this._down&&this._accel),this._bullets.forEach((function(e){e.update(t)}));for(var e=0;e<this._bullets.length;e++){var n=this._bullets[e];n.x>=n._xvals.end&&this._bullets.splice(e--,1)}this._cd.cur>0&&(this._cd.cur-=t),s.prototype.update.call(this,t)}},{key:"draw",value:function(t){var e=this._canvas.getContext("2d");e.beginPath(),e.strokeStyle="#f88",e.lineWidth=1,e.moveTo(this.x+this.width,this.y+this.height/2),e.lineTo(this._canvas.width,this.y+this.height/2),e.stroke(),this._bullets.forEach((function(e){e.draw(t)})),s.prototype.draw.call(this,t)}},{key:"up",value:function(t){this._up=!!t}},{key:"down",value:function(t){this._down=!!t}},{key:"left",value:function(t){this._left=!!t}},{key:"right",value:function(t){this._right=!!t}},{key:"bulletAt",value:function(t){return this._bullets[t]}},{key:"numBullets",get:function(){return this._bullets.length}}])&&m(e.prototype,n),r&&m(e,r),i}(s);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=M(t);if(e){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(i,t);var e,n,r,o=E(i);function i(t,e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var u=1e-4;return o.call(this,t,{last:e,p:e,a:u,max:.1},{last:n,p:n,a:u,max:.3},50,50,r)}return e=i,(n=[{key:"update",value:function(t){(this.x<=0||this.x>=this._xvals.end||Math.random()<.01)&&(this._xvals.a*=-1),(this.y<=0||this.y>=this._yvals.end||Math.random()<.01)&&(this._yvals.a*=-1),j(M(i.prototype),"update",this).call(this,t)}}])&&S(e.prototype,n),r&&S(e,r),i}(s),D=n.p+"src/assets/player.png",C=n.p+"src/assets/bullet.png",A=n.p+"src/assets/enemy.png";var L=function(t){var e=t.getContext("2d"),n=new Image,r=new Image,u=new Image;n.src=D,r.src=C,u.src=A;var c=new k(t,200,t.height/2,n,r),s=[],a=0;return i.bind("w",(function(){c.up(!0)})),i.upbind("w",(function(){c.up(!1)})),i.bind("a",(function(){c.left(!0)})),i.upbind("a",(function(){c.left(!1)})),i.bind("s",(function(){c.down(!0)})),i.upbind("s",(function(){c.down(!1)})),i.bind("d",(function(){c.right(!0)})),i.upbind("d",(function(){c.right(!1)})),o.a.setUpdate((function(e){function n(t,e){return t+Math.random()*(e-t)}i.pressed[" "]&&c.fire(),s.length<5&&Math.random()<.05&&s.push(new T(t,n(t.width/2,t.width-25),n(0,t.height-25),u));for(var r=0;r<s.length;r++)for(var o=s[r],f=0;f<c.numBullets;f++)if(o.collides(c.bulletAt(f))){s.splice(r--,1),c.despawnBullet(f),a++;break}s.forEach((function(t){t.update(e)})),c.update(e)})).setDraw((function(n){e.fillStyle="#ddf",e.fillRect(0,0,t.width,t.height),e.font="30px Arial",e.fillText("kills: ".concat(a),0,t.width/2),s.forEach((function(t){t.draw(n)})),c.draw(n)})),o.a},B=document.getElementById("app"),H=document.createElement("canvas");H.width=1200,H.height=600,H.id="canvas",H.style="padding: 0; margin: auto; display: block;",B.appendChild(H);var F=document.createElement("p");F.innerHTML="WASD to move, Space to shoot.",B.appendChild(F),L(H).start()}]);
//# sourceMappingURL=main.js.map